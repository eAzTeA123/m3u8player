<!DOCTYPE html>
<html>
<head>
    <title>HLS.js Custom Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        video { width: 80%; margin: 20px auto; display: block; }
        #config { padding: 20px; background: #f0f0f0; }
    </style>
</head>
<body>
    <div id="config">
        <h2>Stream-URL:</h2>
        <input type="text" id="streamUrl" value="https://ddy6new.newkso.ru/ddy6/premium426/mono.m3u8" style="width: 80%; padding: 8px;" />
        <button onclick="loadStream()">Stream laden</button>
    </div>

    <video id="video" controls></video>

    <script>
        // HLS.js-Konfiguration mit deinen Einstellungen
        const config = {
            debug: true,
            enableWorker: true,
            lowLatencyMode: false,
            backBufferLength: 30,
            maxBufferLength: 30,
            maxMaxBufferLength: 60,
            maxBufferSize: 50000000,
            maxBufferHole: 0.5,
            xhrSetup: (xhr, url) => {
                xhr.setRequestHeader('Referer', 'https://caq21harderv991gpluralplay.xyz/');
            }
        };

        let hls;
        const video = document.getElementById('video');

        // Stream laden
        function loadStream() {
            const streamUrl = document.getElementById('streamUrl').value;
            
            if (hls) {
                hls.destroy();
            }

            hls = new Hls(config);
            hls.loadSource(streamUrl);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
        }

        // Initialen Stream laden
        loadStream();
    </script>
</body>
</html>
