<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>IPTV Stream mit Video.js</title>
  <!-- Video.js CSS -->
  <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />

  <style>
    body { background: #000; color: #fff; display: flex; flex-direction: column; align-items: center; padding: 2rem; }
    .video-js { width: 90%; max-width: 800px; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>ðŸ“º IPTV mit Video.js</h1>
  <video
    id="player"
    class="video-js vjs-default-skin"
    controls
    autoplay
    data-setup='{}'
  ></video>

  <!-- Video.js und VHS -->
  <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>

  <script>
    // Initialisiere den Player
    const player = videojs('player');

    // Gib die URL des Proxys mit Query-Parameter an
    const sourceUrl = '/api/stream?url=' +
      encodeURIComponent('https://windnew.newkso.ru/wind/premium521/mono.m3u8');

    // Konfiguriere den VHS-Engine-Hook
    player.ready(() => {
      player.src({
        src: sourceUrl,
        type: 'application/x-mpegURL'
      });

      // Vor jedem HTTP-Request (Playlist oder Segment) Header hinzufÃ¼gen
      player.tech(true).vhs.xhr.beforeRequest = function(options) {
        options.headers = Object.assign(options.headers || {}, {
          'Referer': 'https://caq21harderv991gpluralplay.xyz/',
          'Origin':  'https://caq21harderv991gpluralplay.xyz',
          'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_7 like Mac OS X) ' +
                        'AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.0 ' +
                        'Mobile/15E148 Safari/604.1'
        });
        return options;
      };
    });
  </script>
</body>
</html>
