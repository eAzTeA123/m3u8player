<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>IPTV mit Clappr</title>
  <style>
    body { background: #000; color: #fff; display: flex; flex-direction: column; align-items: center; padding: 2rem; }
    #player { width: 90%; max-width: 800px; height: 450px; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>ðŸ“º IPTV Stream (Clappr)</h1>
  <div id="player"></div>

  <!-- Clappr Core + HLS-Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/clappr-hlsjs-playback@latest/dist/clappr-hlsjs-playback.min.js"></script>

  <script>
    const proxyUrl = '/api/stream?url=' +
      encodeURIComponent('https://windnew.newkso.ru/wind/premium521/mono.m3u8');

    // Starte den Clappr-Player
    new Clappr.Player({
      source: proxyUrl,
      parentId: '#player',
      width: '100%',
      height: '100%',
      autoplay: true,
      plugins: [Clappr.HlsjsPlayback],
      playback: {
        hlsjsConfig: {
          // Vor jedem Request Header anhÃ¤ngen
          xhrSetup: function (xhr /*:XMLHttpRequest*/, url /*:string*/) {
            xhr.setRequestHeader('Referer', 'https://caq21harderv991gpluralplay.xyz/');
            xhr.setRequestHeader('Origin',  'https://caq21harderv991gpluralplay.xyz');
            xhr.setRequestHeader('User-Agent',
              'Mozilla/5.0 (iPhone; CPU iPhone OS 17_7 like Mac OS X) ' +
              'AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.0 ' +
              'Mobile/15E148 Safari/604.1'
            );
          }
        }
      }
    });
  </script>
</body>
</html>
